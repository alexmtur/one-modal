<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../neon-animation/neon-animatable-behavior.html">
<link rel="import" href="../neon-animation/neon-animation.html">


<dom-module id="one-modal">
    <template>
        <style>
            #content {
                position: fixed;
                top: 50%;
                left: 50%;
                -webkit-transform: translate(-50%, -50%);
                transform: translate(-50%, -50%);
                background-color: rgba(255, 255, 255, .95);
                border-radius: var(--one-border-radius, 3px);
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                z-index: 1000;
                width: 95vw;
                height: 95vh;
                /*padding: 10px;*/
            }
            #content[closed] {
                display: none;
            }
            #content[size="m"] {
                max-width: 500px;
                max-height: 500px;
            }
            #header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                border-bottom: 1px solid #f1f1f1;
                /*background: pink;*/
            }
            #header-text {
                padding: 15px 0 15px 0;
                text-align: center;
                flex:1;
                padding-left:40px;
                font-size: 120%;
                color: #999;
            }
            #header-icon {
                width: 30px;
                height: auto;
                padding-right: 20px;
            }
            #close {
                width: 20px;
                height: auto;
                /*color: lightgray;*/
                cursor: pointer;
                align-self: flex-start;
                padding: 10px;
                fill:url(#red-gradient);
            }
            #close:hover {
                opacity: 0.5;
            }
            /*#text {*/
                /*!*font-size: 80%;*!*/
            /*}*/

            /*iron-icon {*/
                /*display: flex;*/
                /*width: var(--one-icon-size, 30px);*/
                /*height: auto;*/
                /*margin: 0;*/
                /*!*border: solid 2px white;*!*/
                /*!*border-radius: 30px;*!*/
                /*!*padding: 5px;*!*/
            /*}*/
            /*iron-icon[hidden] {*/
                /*display: none;*/
            /*}*/

        </style>
        <!--Gradient-->
        <svg height="0" width="0" style="position: fixed; z-index: 0;">
            <defs>
                <linearGradient id="red-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:rgb(255, 0, 226);stop-opacity:1" />
                    <stop offset="100%" style="stop-color:rgb(255, 0, 107);stop-opacity:1" />
                </linearGradient>
            </defs>
        </svg>

        <!--<div id="content" closed$="[[!open]]" size$="[[size]]">-->
        <div id="content" size$="[[size]]">
            <!--<slot name="header">-->

            <!--</slot>-->
            <div id="header">
                <div id="header-text"><iron-icon icon="[[icon]]" id="header-icon"></iron-icon>{{title}}</div>
                <iron-icon icon="icons:close" id="close" on-tap="close"></iron-icon>
            </div>
            <content>

            </content>
            <content name="footer">

            </content>
        </div>
    </template>

    <script>
        Polymer({
            is: 'one-modal',
            behaviors: [
                Polymer.NeonAnimationRunnerBehavior
            ],
            properties: {
                open: {
                    type: Boolean,
                    value: false,
                    reflectToAttribute: true,
                    notify: true,
                    observer: '_openChanged'
                },
                icon: {
                    type: String
                },
                title: {
                    type: String
                },
                size: {
                    type: String,
                    value: "m"
                },
                entryAnimation: {
                    value: 'fade-in-animation'
                },
                exitAnimation: {
                    value: 'fade-out-animation'
                }
            },
            listeners: {
                'neon-animation-finish': '_onNeonAnimationFinish'
            },
            _onNeonAnimationFinish: function() {
                if (!this.open) {
                    this.style.display = 'none';
                }
            },
            _openChanged: function () {
                if(this.open) {
                    this.style.display = 'block';
                    this.playAnimation('entry');
                }
                else {
                    this.playAnimation('exit');
                }
            },
            close: function () {
                this.open = false;
                console.log('close')
            }
        });
    </script>
</dom-module>